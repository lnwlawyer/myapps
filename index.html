<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Apps</title>

    <!-- ตั้งค่า Web App (PWA) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="My Apps">
    <meta name="theme-color" content="#000000">

    <!-- รูปไอคอน -->
    <link rel="icon" type="image/jpeg" href="https://live.staticflickr.com/65535/54721899593_5d789ef073_w.jpg">
    <link rel="apple-touch-icon" href="https://live.staticflickr.com/65535/54721899593_5d789ef073_w.jpg">
    
    <!-- เชื่อมโยงไปยังไฟล์ manifest.json ที่แยกออกมา -->
    <link rel="manifest" href="./manifest.json">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Import Map -->
    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.263.1"
            }
        }
    </script>

    <style>
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            overscroll-behavior-y: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 10s linear infinite; }
        
        /* Animation for Install Button */
        @keyframes pulse-ring {
            0% { transform: scale(0.33); }
            80%, 100% { opacity: 0; }
        }
        .ring-container {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 0;
        }
        .circle {
            width: 100%; height: 100%;
            border-radius: 50%;
            background-color: var(--accent);
            opacity: 0.5;
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
    </style>
</head>
<body class="bg-black text-white h-screen overflow-hidden">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Plus, Settings, Menu, LayoutGrid, Briefcase, Music, Zap, Clock, 
            Palette, Download, RotateCcw, Monitor, Check, Star, User, Building, 
            MapPin, Calendar as CalendarIcon, Grid, ChevronLeft, ChevronRight, 
            Award, Lightbulb, Bell, Cloud, Sun, Link, RefreshCw, Smartphone,
            Database, BookOpen, MessageCircle, MoreHorizontal, GraduationCap, Phone, Mail, Globe, Eye, Trash2, X, Heart
        } from 'lucide-react';

        const WebAppLauncher = () => {
            const LOGO_URL = "https://live.staticflickr.com/65535/54721899593_5d789ef073_w.jpg";
            const DEFAULT_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQr2K1V0RWB19VkP2_zRh2WW2fwrGO9Ij6JktL_6taysLNCICz-IKYRZnO6n0VsJIJnNmb-U0nXL9UW/pub?gid=0&single=true&output=csv";

            const themes = {
                dark: { id: 'dark', name: 'OLED Black', colors: { '--bg-main': '#000000', '--bg-sidebar': '#000000', '--bg-header': '#000000', '--text-main': '#E5E5E5', '--text-header': '#FFFFFF', '--text-muted': '#A1A1AA', '--primary': '#18181B', '--accent': '#3B82F6', '--border': '#27272A' } },
                sage: { id: 'sage', name: 'Sage Green', colors: { '--bg-main': '#E0E8DF', '--bg-sidebar': '#FDF7E4', '--bg-header': '#40513B', '--text-main': '#2F4F4F', '--text-header': '#FDF7E4', '--text-muted': '#5D8A66', '--primary': '#40513B', '--accent': '#B25068', '--border': '#9DC08B' } },
                ocean: { id: 'ocean', name: 'Ocean Mist', colors: { '--bg-main': '#E6F4F1', '--bg-sidebar': '#F0FCF8', '--bg-header': '#4A7C8F', '--text-main': '#2C4A52', '--text-header': '#F0FCF8', '--text-muted': '#6B9096', '--primary': '#4A7C8F', '--accent': '#E07A5F', '--border': '#A4D0D0' } }
            };

            const defaultApps = [
                { id: 1, name: 'Google', url: 'https://www.google.com', icon: 'https://www.google.com/favicon.ico', category: 'Knowledge' },
                { id: 2, name: 'YouTube', url: 'https://www.youtube.com', icon: 'https://www.youtube.com/s/desktop/10c3c403/img/favicon_144x144.png', category: 'Entertainment' },
                { id: 3, name: 'Facebook', url: 'https://www.facebook.com', icon: 'https://static.xx.fbcdn.net/rsrc.php/yD/r/d4ZIVX-5C-b.ico', category: 'Social' },
                { id: 4, name: 'ChatGPT', url: 'https://chat.openai.com', icon: 'https://chat.openai.com/favicon.ico', category: 'Tools' }
            ];

            const categories = [
                { id: 'All', name: 'ทั้งหมด', icon: <LayoutGrid size={18} /> },
                { id: 'Data', name: 'ข้อมูล', icon: <Database size={18} /> },
                { id: 'Work', name: 'การทำงาน', icon: <Briefcase size={18} /> },
                { id: 'Knowledge', name: 'ความรู้', icon: <BookOpen size={18} /> },
                { id: 'Tools', name: 'เครื่องมือ', icon: <Zap size={18} /> },
                { id: 'Social', name: 'โซเชียล', icon: <MessageCircle size={18} /> },
                { id: 'Entertainment', name: 'บันเทิง', icon: <Music size={18} /> },
                { id: 'Others', name: 'อื่นๆ', icon: <MoreHorizontal size={18} /> }
            ];

            const [apps, setApps] = useState(() => JSON.parse(localStorage.getItem('myapp_data_v9')) || defaultApps);
            const [currentTheme, setCurrentTheme] = useState(() => localStorage.getItem('myapp_theme_v9') || 'dark');
            const [config, setConfig] = useState(() => JSON.parse(localStorage.getItem('myapp_config_v9')) || { clock24h: true, animations: true, sheetUrl: DEFAULT_SHEET_URL });
            
            const [view, setView] = useState('apps');
            const [aboutTab, setAboutTab] = useState('work');
            const [selectedCategory, setSelectedCategory] = useState('All');
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [isEditMode, setIsEditMode] = useState(false);
            const [currentTime, setCurrentTime] = useState(new Date());

            const [isSyncing, setIsSyncing] = useState(false);
            const [newAppName, setNewAppName] = useState('');
            const [newAppUrl, setNewAppUrl] = useState('');
            const [newAppIcon, setNewAppIcon] = useState('');
            const [newAppCategory, setNewAppCategory] = useState('Tools');
            
            // PWA Install State
            const [installPrompt, setInstallPrompt] = useState(null);
            
            useEffect(() => { localStorage.setItem('myapp_data_v9', JSON.stringify(apps)); }, [apps]);
            useEffect(() => { localStorage.setItem('myapp_theme_v9', currentTheme); }, [currentTheme]);
            useEffect(() => { localStorage.setItem('myapp_config_v9', JSON.stringify(config)); }, [config]);
            
            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                if(config.sheetUrl) fetchAppsFromSheet(config.sheetUrl, false);
                
                // PWA Install Listener
                const handleBeforeInstallPrompt = (e) => {
                    e.preventDefault();
                    setInstallPrompt(e);
                };
                window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
                
                return () => {
                    clearInterval(timer);
                    window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
                };
            }, []);

            const handleInstallApp = async () => {
                if (!installPrompt) return;
                installPrompt.prompt();
                const { outcome } = await installPrompt.userChoice;
                if (outcome === 'accepted') {
                    setInstallPrompt(null);
                }
            };

            const fetchAppsFromSheet = async (url, showAlert = true) => {
                if (!url) return;
                setIsSyncing(true);
                try {
                    const response = await fetch(url);
                    const text = await response.text();
                    const rows = text.split('\n').slice(1);
                    const newSheetApps = rows.map((row, index) => {
                        const cols = row.split(',');
                        if (cols.length < 2) return null;
                        const clean = (str) => str ? str.trim().replace(/^"|"$/g, '') : '';
                        return { id: `sheet-${index}`, name: clean(cols[0]) || 'No Name', url: clean(cols[1]) || '#', icon: clean(cols[2]) || '', category: clean(cols[3]) || 'Tools' };
                    }).filter(item => item !== null && item.name && item.url);

                    if (newSheetApps.length > 0) {
                        setApps(newSheetApps);
                        if (showAlert) alert(`ซิงค์ข้อมูลสำเร็จ! พบ ${newSheetApps.length} รายการ`);
                    } else if (showAlert) alert('ไม่พบข้อมูลใน CSV');
                } catch (error) { if (showAlert) alert('เกิดข้อผิดพลาดในการดึงข้อมูล'); }
                finally { setIsSyncing(false); }
            };

            const handleAddApp = (e) => {
                e.preventDefault();
                setApps([...apps, { id: Date.now(), name: newAppName, url: newAppUrl, icon: newAppIcon, category: newAppCategory }]);
                setNewAppName(''); setNewAppUrl(''); setNewAppIcon(''); setIsModalOpen(false);
            };

            const handleExport = () => {
                const dataStr = JSON.stringify({ apps, config, theme: currentTheme });
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', 'my_apps_backup.json');
                linkElement.click();
            };

            const handleReset = () => {
                if(confirm('รีเซ็ตข้อมูลทั้งหมด?')) {
                    setApps(defaultApps); setCurrentTheme('dark');
                    const resetConfig = { clock24h: true, animations: true, sheetUrl: DEFAULT_SHEET_URL };
                    setConfig(resetConfig);
                    setTimeout(() => fetchAppsFromSheet(DEFAULT_SHEET_URL, false), 500);
                }
            };

            const filteredApps = apps.filter(app => (selectedCategory === 'All' || app.category === selectedCategory));
            const themeStyles = themes[currentTheme].colors;

            return (
                <div className={`flex flex-col h-screen overflow-hidden font-sans transition-colors duration-500`} style={themeStyles}>
                    {/* Header */}
                    <header className="h-16 flex items-center justify-between px-4 md:px-6 shadow-md z-40 flex-shrink-0 transition-colors duration-300" style={{ backgroundColor: 'var(--bg-header)', color: 'var(--text-header)', borderBottom: '1px solid var(--border)' }}>
                        <div className="flex items-center gap-3">
                            <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className="md:hidden p-1 hover:bg-white/10 rounded"><Menu size={24} /></button>
                            <div className="flex items-center gap-3">
                                <img src={LOGO_URL} alt="Logo" className="w-10 h-10 rounded-lg object-cover border border-[var(--border)] shadow-sm"/>
                                <span className="text-xl font-bold font-serif tracking-wide hidden sm:block">My Apps</span>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            {/* Mobile Install Button in Header if Prompt Available */}
                            {installPrompt && (
                                <button onClick={handleInstallApp} className="md:hidden flex items-center gap-1 px-3 py-1.5 rounded-full bg-[var(--accent)] text-white text-xs font-bold shadow-lg animate-pulse">
                                    <Smartphone size={14} /> ติดตั้ง
                                </button>
                            )}
                            
                            <div className="hidden sm:flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium border border-[var(--border)] bg-white/5 text-[var(--text-main)]">
                                <span className="flex items-center gap-1 pr-2 mr-2 border-r border-[var(--border)] opacity-90"><CalendarIcon size={12} className="text-[var(--accent)]" /><span>{currentTime.toLocaleDateString('th-TH', { weekday: 'short', day: 'numeric', month: 'short' })}</span></span>
                                <div className="flex items-center gap-1 font-mono"><span>{currentTime.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit', hour12: !config.clock24h })}</span></div>
                            </div>
                            {view === 'apps' && !config.sheetUrl && (
                                <button onClick={() => setIsEditMode(!isEditMode)} className={`w-8 h-8 rounded-full flex items-center justify-center border-2 hover:bg-white/10 transition-colors ${isEditMode ? 'bg-[var(--accent)] border-[var(--accent)] text-white' : 'bg-[var(--bg-sidebar)] border-[var(--border)] text-[var(--text-main)]'}`} title="แก้ไข/ลบแอพ">
                                    <Plus size={16} className={isEditMode ? "rotate-45" : ""} />
                                </button>
                            )}
                            <button onClick={() => setView('settings')} className="w-8 h-8 rounded-full flex items-center justify-center bg-[var(--bg-sidebar)] border-2 hover:bg-white/10" style={{ borderColor: 'var(--accent)' }} title="ตั้งค่า">
                                <Settings size={16} style={{ color: 'var(--text-main)' }} />
                            </button>
                        </div>
                    </header>

                    {/* Body */}
                    <div className="flex flex-grow overflow-hidden relative">
                        <aside className={`fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ease-in-out ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:relative md:translate-x-0 flex flex-col mt-16 md:mt-0 h-[calc(100vh-4rem)] md:h-auto shadow-xl md:shadow-none border-r`} style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                            <nav className="flex-grow p-4 space-y-1 overflow-y-auto">
                                <div className="pb-2 pl-2 text-xs font-bold uppercase tracking-wider flex items-center gap-2" style={{ color: 'var(--text-muted)' }}><Star size={10} className="text-[var(--accent)]" /> เมนูหลัก</div>
                                {categories.map((cat) => (
                                    <button key={cat.id} onClick={() => { setSelectedCategory(cat.id); setView('apps'); if(window.innerWidth < 768) setIsSidebarOpen(false); }} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium text-sm mb-1 ${view === 'apps' && selectedCategory === cat.id ? 'border-l-4 shadow-sm' : 'border-l-4 border-transparent opacity-70 hover:opacity-100'}`} style={{ backgroundColor: view === 'apps' && selectedCategory === cat.id ? 'var(--primary)' : 'transparent', color: view === 'apps' && selectedCategory === cat.id ? 'var(--text-header)' : 'var(--text-main)', borderColor: view === 'apps' && selectedCategory === cat.id ? 'var(--accent)' : 'transparent' }}>
                                            <span style={{ color: view === 'apps' && selectedCategory === cat.id ? 'var(--accent)' : 'var(--text-muted)' }}>{cat.icon}</span>{cat.name}
                                    </button>
                                ))}
                                <div className="my-4 border-t" style={{ borderColor: 'var(--border)' }}></div>
                                <button onClick={() => { setView('about'); if(window.innerWidth <768) setIsSidebarOpen(false); }} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all text-sm ${view === 'about' ? 'border-l-4' : 'border-l-4 border-transparent opacity-70'}`} style={{ backgroundColor: view === 'about' ? 'var(--primary)' : 'transparent', color: view === 'about' ? 'var(--text-header)' : 'var(--text-main)', borderColor: view === 'about' ? 'var(--accent)' : 'transparent' }}>
                                    <User size={18} style={{ color: view === 'about' ? 'var(--accent)' : 'var(--text-muted)' }} /> เกี่ยวกับฉัน
                                </button>
                                
                                {/* Install App Button (Desktop/Sidebar) */}
                                {installPrompt && (
                                    <div className="mt-4 px-4">
                                        <button onClick={handleInstallApp} className="w-full relative flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-[var(--accent)] text-white font-bold shadow-lg overflow-hidden group">
                                            <div className="ring-container">
                                                <div className="circle"></div>
                                            </div>
                                            <Smartphone size={20} className="relative z-10" />
                                            <span className="relative z-10">ติดตั้งแอพลงเครื่อง</span>
                                        </button>
                                    </div>
                                )}
                            </nav>
                        </aside>

                        <div className="flex-grow flex flex-col h-full overflow-hidden relative w-full" style={{ backgroundColor: 'var(--bg-main)', backgroundImage: currentTheme === 'dark' ? 'none' : 'radial-gradient(var(--text-muted) 0.5px, transparent 0.5px)', backgroundSize: '32px 32px' }}>
                            {isSidebarOpen && <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-20 md:hidden mt-16" onClick={() => setIsSidebarOpen(false)}></div>}

                            {view === 'apps' && (
                                <main className="flex-grow p-4 md:p-8 overflow-y-auto">
                                    <div className={`grid gap-4 md:gap-6 pb-20 grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7`}>
                                        {filteredApps.map((app) => (
                                            <div key={app.id} className="relative flex flex-col items-center justify-center group">
                                                {isEditMode && (<button onClick={() => { if(confirm('ลบแอพ?')) setApps(apps.filter(a => a.id !== app.id)); }} className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 shadow-md z-20 animate-bounce"><Trash2 size={14} /></button>)}
                                                <button onClick={() => !isEditMode && window.open(app.url, '_blank')} className={`w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center transition-all duration-300 overflow-hidden border ${isEditMode ? 'animate-pulse' : config.animations ? 'hover:-translate-y-1 hover:shadow-lg' : ''}`} style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)', boxShadow: currentTheme === 'dark' ? 'none' : '0 4px 6px rgba(0,0,0,0.1)' }}>
                                                    <img src={app.icon} alt={app.name} className="w-10 h-10 md:w-12 md:h-12 object-contain" onError={(e)=>e.target.src='https://via.placeholder.com/64'} />
                                                </button>
                                                <span className="mt-2 text-xs font-bold truncate w-full text-center" style={{ color: 'var(--text-main)' }}>{app.name}</span>
                                            </div>
                                        ))}
                                        
                                        {!config.sheetUrl && (
                                            <div className="flex flex-col items-center justify-center">
                                                <button onClick={() => setIsModalOpen(true)} className="w-16 h-16 md:w-20 md:h-20 rounded-full border-2 border-dashed flex items-center justify-center transition hover:bg-white/5" style={{ borderColor: 'var(--border)', color: 'var(--text-muted)' }}><Plus size={24} /></button>
                                                <span className="mt-2 text-xs font-bold" style={{ color: 'var(--text-muted)' }}>เพิ่ม</span>
                                            </div>
                                        )}
                                    </div>
                                </main>
                            )}

                            {view === 'settings' && (
                                <div className="flex-grow p-4 md:p-8 overflow-y-auto">
                                    <div className="max-w-3xl mx-auto space-y-8 pb-20">
                                        <div className="pb-4 border-b" style={{ borderColor: 'var(--border)' }}><h2 className="text-3xl font-serif font-bold" style={{ color: 'var(--text-header)' }}>ตั้งค่า</h2><p style={{ color: 'var(--text-muted)' }}>ปรับแต่ง My Apps ในแบบของคุณ</p></div>
                                        <section className="space-y-4">
                                            <h3 className="text-lg font-bold flex items-center gap-2" style={{ color: 'var(--accent)' }}><Link size={20} /> แหล่งข้อมูล (Data Source)</h3>
                                            <div className="p-4 rounded-xl border bg-[var(--bg-sidebar)]" style={{ borderColor: 'var(--border)' }}>
                                                <p className="text-sm mb-2" style={{ color: 'var(--text-main)' }}>Google Sheet CSV URL:</p>
                                                <div className="flex gap-2">
                                                    <input type="text" placeholder="https://docs.google.com/spreadsheets/d/.../pub?output=csv" value={config.sheetUrl || ''} onChange={(e) => setConfig({...config, sheetUrl: e.target.value})} className="flex-grow p-2 rounded-lg border outline-none text-sm" style={{ backgroundColor: 'var(--bg-main)', color: 'var(--text-main)', borderColor: 'var(--border)' }} />
                                                    <button onClick={() => fetchAppsFromSheet(config.sheetUrl)} disabled={isSyncing} className="px-4 py-2 rounded-lg bg-[var(--accent)] text-white font-bold text-sm flex items-center gap-2">{isSyncing ? <RefreshCw size={14} className="animate-spin"/> : <Download size={14}/>} Sync</button>
                                                </div>
                                                <p className="text-xs mt-2 opacity-60" style={{ color: 'var(--text-muted)' }}>* หากใส่ URL ระบบจะดึงข้อมูลจาก Sheet แทนการบันทึกในเครื่อง</p>
                                            </div>
                                        </section>
                                        <section className="space-y-4">
                                            <h3 className="text-lg font-bold flex items-center gap-2" style={{ color: 'var(--accent)' }}><Palette size={20} /> เลือกธีม</h3>
                                            <div className="grid grid-cols-2 md:grid-cols-6 gap-3">
                                                {Object.values(themes).map((theme) => (
                                                    <button key={theme.id} onClick={() => setCurrentTheme(theme.id)} className={`relative p-2 rounded-xl border-2 transition-all ${currentTheme === theme.id ? 'ring-2 ring-[var(--accent)] scale-105' : 'opacity-80'}`} style={{ borderColor: 'var(--border)', backgroundColor: theme.colors['--bg-sidebar'] }}>
                                                        <div className="h-8 rounded-lg mb-2 shadow-inner border" style={{ backgroundColor: theme.colors['--bg-main'] }}></div>
                                                        <span className="text-[10px] font-bold block text-center" style={{ color: theme.colors['--text-main'] }}>{theme.name}</span>
                                                    </button>
                                                ))}
                                            </div>
                                        </section>
                                        <section className="space-y-4 p-6 rounded-2xl border" style={{ borderColor: 'var(--border)', backgroundColor: 'var(--primary)' }}>
                                            <h3 className="text-lg font-bold flex items-center gap-2" style={{ color: 'var(--accent)' }}><Monitor size={20} /> การแสดงผล</h3>
                                            <div className="flex items-center justify-between"><div><p className="font-bold" style={{color: 'var(--text-main)'}}>นาฬิกา 24 ชั่วโมง</p></div><button onClick={() => setConfig({...config, clock24h: !config.clock24h})} className={`w-12 h-6 rounded-full p-1 transition ${config.clock24h ? 'bg-[var(--accent)]' : 'bg-gray-500'}`}><div className={`w-4 h-4 bg-white rounded-full transform transition ${config.clock24h ? 'translate-x-6' : ''}`}></div></button></div>
                                        </section>
                                        <div className="flex gap-4"><button onClick={handleExport} className="px-4 py-2 rounded-lg border text-xs flex items-center gap-2" style={{ borderColor: 'var(--border)', color: 'var(--text-main)' }}><Download size={14}/> Backup</button><button onClick={handleReset} className="px-4 py-2 rounded-lg border border-red-900 bg-red-900/20 text-red-500 text-xs flex items-center gap-2"><RotateCcw size={14}/> Reset</button></div>
                                    </div>
                                </div>
                            )}
                            
                            {view === 'about' && (
                                <div className="flex-grow p-4 md:p-8 overflow-y-auto flex flex-col items-center gap-6">
                                    <div className="max-w-2xl w-full">
                                        <div className="rounded-3xl p-8 shadow-2xl border text-center relative overflow-hidden" style={{ backgroundColor: 'var(--primary)', borderColor: 'var(--border)' }}>
                                            <div className="absolute top-0 left-0 w-full h-24 bg-gradient-to-b from-[var(--accent)] opacity-20"></div>
                                            <div className="relative mx-auto w-24 h-24 rounded-full p-1 border-4 shadow-lg mb-4" style={{ borderColor: 'var(--accent)' }}>
                                                <img src={LOGO_URL} className="w-full h-full rounded-full object-cover" alt="Profile" />
                                            </div>
                                            <h2 className="text-2xl font-bold" style={{ color: 'var(--text-header)' }}>พงศธร บุญประเสริฐ</h2>
                                            <p className="text-sm mt-2 opacity-80" style={{ color: 'var(--text-main)' }}>ผู้อำนวยการส่วนกำหนดสิทธิในที่ดิน<br/>และควบคุมทะเบียนที่ดิน</p>
                                        </div>
                                    </div>

                                    <div className="w-full max-w-2xl px-4 pb-2 relative">
                                        <div className="absolute right-0 top-0 bottom-2 w-16 bg-gradient-to-l from-[var(--bg-main)] to-transparent pointer-events-none flex items-center justify-end px-1 md:hidden z-10">
                                            <ChevronRight size={20} className="text-[var(--accent)] animate-pulse" />
                                        </div>
                                        <div className="flex flex-nowrap overflow-x-auto gap-2 w-full no-scrollbar py-1 relative z-0" style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}>
                                            <button onClick={() => setAboutTab('work')} className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold border transition-all duration-300 whitespace-nowrap ${aboutTab === 'work' ? 'bg-[var(--accent)] text-white border-[var(--accent)] shadow-lg' : 'bg-[var(--bg-sidebar)] text-[var(--text-main)] border-[var(--border)] hover:bg-[var(--primary)]'}`}><Briefcase size={16} /> ประวัติการทำงาน</button>
                                            <button onClick={() => setAboutTab('education')} className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold border transition-all duration-300 whitespace-nowrap ${aboutTab === 'education' ? 'bg-[var(--accent)] text-white border-[var(--accent)] shadow-lg' : 'bg-[var(--bg-sidebar)] text-[var(--text-main)] border-[var(--border)] hover:bg-[var(--primary)]'}`}><GraduationCap size={16} /> การศึกษา</button>
                                            <button onClick={() => setAboutTab('vision')} className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold border transition-all duration-300 whitespace-nowrap ${aboutTab === 'vision' ? 'bg-[var(--accent)] text-white border-[var(--accent)] shadow-lg' : 'bg-[var(--bg-sidebar)] text-[var(--text-main)] border-[var(--border)] hover:bg-[var(--primary)]'}`}><Eye size={16} /> วิสัยทัศน์</button>
                                            <button onClick={() => setAboutTab('concept')} className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold border transition-all duration-300 whitespace-nowrap ${aboutTab === 'concept' ? 'bg-[var(--accent)] text-white border-[var(--accent)] shadow-lg' : 'bg-[var(--bg-sidebar)] text-[var(--text-main)] border-[var(--border)] hover:bg-[var(--primary)]'}`}><Lightbulb size={16} /> แนวคิดพัฒนางาน</button>
                                            <button onClick={() => setAboutTab('contact')} className={`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold border transition-all duration-300 whitespace-nowrap ${aboutTab === 'contact' ? 'bg-[var(--accent)] text-white border-[var(--accent)] shadow-lg' : 'bg-[var(--bg-sidebar)] text-[var(--text-main)] border-[var(--border)] hover:bg-[var(--primary)]'}`}><Phone size={16} /> ติดต่อ</button>
                                            <div className="w-8 flex-shrink-0 md:hidden"></div>
                                        </div>
                                    </div>

                                    <div className="max-w-2xl w-full animate-in fade-in slide-in-from-bottom-4 duration-500">
                                        {aboutTab === 'work' && (
                                            <div className="grid grid-cols-1 gap-4">
                                                <div className="rounded-3xl p-6 border shadow-sm h-full" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <h3 className="font-bold mb-4 flex items-center gap-2" style={{ color: 'var(--text-header)' }}><Briefcase size={18} style={{ color: 'var(--accent)' }}/> ประวัติการทำงาน</h3>
                                                    <ul className="space-y-4 text-sm" style={{ color: 'var(--text-main)' }}>
                                                        <li className="flex gap-3 items-start"><div className="w-2 h-2 rounded-full mt-1.5 flex-shrink-0" style={{ backgroundColor: 'var(--accent)' }}></div><span className="opacity-90">ผู้อำนวยการส่วนกำหนดสิทธิในที่ดินและควบคุมทะเบียนที่ดิน</span></li>
                                                        <li className="flex gap-3 items-start"><div className="w-2 h-2 rounded-full mt-1.5 flex-shrink-0" style={{ backgroundColor: 'var(--text-muted)' }}></div><span className="opacity-70">นักวิชาการที่ดินชำนาญการพิเศษ สำนักมาตรฐานการทะเบียนที่ดิน</span></li>
                                                        <li className="flex gap-3 items-start"><div className="w-2 h-2 rounded-full mt-1.5 flex-shrink-0" style={{ backgroundColor: 'var(--text-muted)' }}></div><span className="opacity-70">เจ้าพนักงานที่ดินอำเภอไทรโยค จังหวัดกาญจนบุรี</span></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        )}
                                        {aboutTab === 'education' && (
                                            <div className="grid grid-cols-1 gap-4">
                                                <div className="rounded-3xl p-6 border shadow-sm flex items-start gap-4" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <div className="p-3 rounded-2xl bg-[var(--primary)] text-[var(--accent)]"><GraduationCap size={24} /></div>
                                                    <div>
                                                        <h3 className="font-bold text-lg mb-1" style={{ color: 'var(--text-header)' }}>ปริญญาตรี</h3>
                                                        <p className="font-medium" style={{ color: 'var(--text-main)' }}>นิติศาสตรบัณฑิต (LL.B.)</p>
                                                        <p className="text-sm opacity-60 mt-1" style={{ color: 'var(--text-muted)' }}>มหาวิทยาลัยนเรศวร</p>
                                                    </div>
                                                </div>
                                                <div className="rounded-3xl p-6 border shadow-sm flex items-start gap-4" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <div className="p-3 rounded-2xl bg-[var(--primary)] text-[var(--text-muted)]"><GraduationCap size={24} /></div>
                                                    <div>
                                                        <h3 className="font-bold text-lg mb-1" style={{ color: 'var(--text-header)' }}>ปริญญาโท</h3>
                                                        <p className="font-medium" style={{ color: 'var(--text-main)' }}>นิติศาสตรมหาบัณฑิต (LL.M.)</p>
                                                        <p className="text-sm opacity-60 mt-1" style={{ color: 'var(--text-muted)' }}>มหาวิทยาลัยพะเยา</p>
                                                    </div>
                                                </div>
                                                    <div className="rounded-3xl p-6 border shadow-sm flex items-start gap-4" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <div className="p-3 rounded-2xl bg-[var(--primary)] text-[var(--text-muted)]"><GraduationCap size={24} /></div>
                                                    <div>
                                                        <h3 className="font-bold text-lg mb-1" style={{ color: 'var(--text-header)' }}>เนติบัณฑิต</h3>
                                                        <p className="font-medium" style={{ color: 'var(--text-main)' }}>เนติบัณฑิตไทย</p>
                                                        <p className="text-sm opacity-60 mt-1" style={{ color: 'var(--text-muted)' }}>สำนักอบรมศึกษากฎหมายแห่งเนติบัณฑิตนสภา</p>
                                                    </div>
                                                </div>
                                                <div className="rounded-3xl p-6 border shadow-sm" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <h3 className="font-bold mb-3 flex items-center gap-2" style={{ color: 'var(--text-header)' }}><Award size={18} style={{ color: 'var(--accent)' }}/> การฝึกอบรม</h3>
                                                    <ul className="space-y-3 text-sm" style={{ color: 'var(--text-main)' }}>
                                                        <li className="flex gap-3 items-start"><Check size={16} className="mt-0.5 text-[var(--accent)] flex-shrink-0" /><span>หลักสูตรนักบริหารระดับสูง (นบส.) รุ่นที่ XX</span></li>
                                                        <li className="flex gap-3 items-start"><Check size={16} className="mt-0.5 text-[var(--accent)] flex-shrink-0" /><span>หลักสูตรกฎหมายปกครองสำหรับผู้บริหาร</span></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        )}
                                        {aboutTab === 'vision' && (
                                            <div className="grid grid-cols-1 gap-4">
                                                <div className="rounded-3xl p-8 border shadow-sm text-center relative overflow-hidden" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <div className="absolute top-0 right-0 p-10 opacity-5"><Eye size={120} style={{ color: 'var(--text-main)' }} /></div>
                                                    <h3 className="font-bold text-xl mb-6 flex items-center justify-center gap-2" style={{ color: 'var(--text-header)' }}><Eye size={24} style={{ color: 'var(--accent)' }}/> วิสัยทัศน์ (Vision)</h3>
                                                    <p className="text-base leading-8 font-medium italic" style={{ color: 'var(--text-main)' }}>"ยกระดับมาตรฐานงานทะเบียนที่ดินสู่ความเป็นเลิศ ด้วยนวัตกรรมและเทคโนโลยีที่ทันสมัย เพื่อสร้างความมั่นคงในสิทธิที่ดิน และการบริการที่โปร่งใส รวดเร็ว เข้าถึงง่ายสำหรับประชาชนทุกคน"</p>
                                                    <div className="mt-6 flex justify-center gap-2"><div className="h-1 w-2 rounded-full" style={{ backgroundColor: 'var(--accent)' }}></div><div className="h-1 w-8 rounded-full" style={{ backgroundColor: 'var(--accent)' }}></div><div className="h-1 w-2 rounded-full" style={{ backgroundColor: 'var(--accent)' }}></div></div>
                                                </div>
                                            </div>
                                        )}
                                        {aboutTab === 'concept' && (
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div className="col-span-1 md:col-span-2 rounded-3xl p-6 border shadow-sm" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <h3 className="font-bold mb-4 flex items-center gap-2" style={{ color: 'var(--text-header)' }}><Lightbulb size={18} style={{ color: 'var(--accent)' }}/> แนวคิดในการพัฒนางาน</h3>
                                                    <div className="space-y-4">
                                                        <div className="p-4 rounded-2xl border flex gap-4" style={{ borderColor: 'var(--border)', backgroundColor: 'var(--primary)' }}>
                                                            <div className="p-2 rounded-lg bg-[var(--accent)] text-white h-fit"><Zap size={20} /></div>
                                                            <div><h4 className="font-bold text-sm mb-1" style={{ color: 'var(--text-header)' }}>Smart Services</h4><p className="text-xs opacity-80" style={{ color: 'var(--text-main)' }}>พัฒนาระบบบริการจดทะเบียนที่ดินออนไลน์ ลดขั้นตอนและระยะเวลา เพื่อความสะดวกของประชาชน</p></div>
                                                        </div>
                                                        <div className="p-4 rounded-2xl border flex gap-4" style={{ borderColor: 'var(--border)', backgroundColor: 'var(--primary)' }}>
                                                            <div className="p-2 rounded-lg bg-[var(--accent)] text-white h-fit"><Check size={20} /></div>
                                                            <div><h4 className="font-bold text-sm mb-1" style={{ color: 'var(--text-header)' }}>Data Accuracy</h4><p className="text-xs opacity-80" style={{ color: 'var(--text-main)' }}>ยกระดับความถูกต้องแม่นยำของฐานข้อมูลที่ดิน ด้วยการนำเทคโนโลยีรังวัดสมัยใหม่มาประยุกต์ใช้</p></div>
                                                        </div>
                                                        <div className="p-4 rounded-2xl border flex gap-4" style={{ borderColor: 'var(--border)', backgroundColor: 'var(--primary)' }}>
                                                            <div className="p-2 rounded-lg bg-[var(--accent)] text-white h-fit"><Heart size={20} /></div>
                                                            <div><h4 className="font-bold text-sm mb-1" style={{ color: 'var(--text-header)' }}>Good Governance</h4><p className="text-xs opacity-80" style={{ color: 'var(--text-main)' }}>บริหารจัดการด้วยความโปร่งใส ตรวจสอบได้ และยึดหลักธรรมาภิบาลในการปฏิบัติหน้าที่</p></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                        {aboutTab === 'contact' && (
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div className="col-span-1 md:col-span-2 rounded-3xl p-6 border shadow-sm text-center" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}>
                                                    <div className="w-12 h-12 mx-auto rounded-full flex items-center justify-center bg-[var(--primary)] text-[var(--accent)] mb-3"><Building size={24} /></div>
                                                    <h3 className="font-bold text-lg mb-2" style={{ color: 'var(--text-header)' }}>ที่ทำงาน</h3>
                                                    <p className="text-sm opacity-80 leading-relaxed" style={{ color: 'var(--text-main)' }}>สำนักมาตรฐานการทะเบียนที่ดิน กรมที่ดิน<br/>ศูนย์ราชการเฉลิมพระเกียรติ 80 พรรษาฯ อาคารรัฐประศาสนภักดี (อาคารบี)<br/>ถนนแจ้งวัฒนะ แขวงทุ่งสองห้อง เขตหลักสี่ กรุงเทพมหานคร 10210</p>
                                                </div>
                                                <a href="tel:021415555" className="rounded-3xl p-6 border shadow-sm flex flex-col items-center justify-center hover:bg-[var(--primary)] transition-colors group" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}><Phone size={32} className="mb-3 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors" /><span className="text-sm font-bold" style={{ color: 'var(--text-main)' }}>โทรศัพท์</span><span className="text-xs opacity-60 mt-1" style={{ color: 'var(--text-muted)' }}>0-2141-5767</span></a>
                                                <a href="mailto:contact@dol.go.th" className="rounded-3xl p-6 border shadow-sm flex flex-col items-center justify-center hover:bg-[var(--primary)] transition-colors group" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}><Mail size={32} className="mb-3 text-[var(--text-muted)] group-hover:text-[var(--accent)] transition-colors" /><span className="text-sm font-bold" style={{ color: 'var(--text-main)' }}>อีเมล</span><span className="text-xs opacity-60 mt-1" style={{ color: 'var(--text-muted)' }}>phonga2730@gmail.com</span></a>
                                                <a href="https://www.dol.go.th" target="_blank" className="col-span-1 md:col-span-2 rounded-3xl p-4 border shadow-sm flex items-center justify-between hover:bg-[var(--primary)] transition-colors px-6" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)' }}><div className="flex items-center gap-3"><Globe size={20} style={{ color: 'var(--accent)' }} /><span className="font-medium" style={{ color: 'var(--text-main)' }}>เว็บไซต์กรมที่ดิน</span></div><ChevronRight size={16} style={{ color: 'var(--text-muted)' }} /></a>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            <footer className="border-t p-3 text-center flex justify-between items-center px-6 text-[10px] md:text-xs font-medium z-10 transition-colors" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--border)', color: 'var(--text-muted)' }}>
                                <div className="flex items-center gap-1"><span>&copy; {new Date().getFullYear()} My Apps. สงวนลิขสิทธิ์</span></div>
                                <div>Layout: <span style={{color: 'var(--accent)'}}>Grid</span></div>
                            </footer>
                        </div>
                    </div>

                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                            <div className="rounded-2xl w-full max-w-sm p-6 shadow-2xl border relative" style={{ backgroundColor: 'var(--bg-sidebar)', borderColor: 'var(--accent)' }}>
                                <div className="flex justify-between items-center mb-4 border-b pb-2" style={{ borderColor: 'var(--border)' }}><h3 className="text-lg font-bold" style={{ color: 'var(--text-header)' }}>เพิ่มแอพ</h3><button onClick={() => setIsModalOpen(false)} style={{ color: 'var(--text-muted)' }}><X size={20} /></button></div>
                                <form onSubmit={handleAddApp} className="space-y-3">
                                    <input type="text" value={newAppName} onChange={(e) => setNewAppName(e.target.value)} className="w-full border rounded-lg px-3 py-2 outline-none text-sm" style={{ backgroundColor: 'var(--bg-main)', borderColor: 'var(--border)', color: 'var(--text-main)' }} placeholder="ชื่อแอพ" required />
                                    <select value={newAppCategory} onChange={(e) => setNewAppCategory(e.target.value)} className="w-full border rounded-lg px-3 py-2 outline-none text-sm" style={{ backgroundColor: 'var(--bg-main)', borderColor: 'var(--border)', color: 'var(--text-main)' }}>{categories.filter(c => c.id !== 'All').map(c => (<option key={c.id} value={c.id}>{c.name}</option>))}</select>
                                    <input type="url" value={newAppUrl} onChange={(e) => setNewAppUrl(e.target.value)} className="w-full border rounded-lg px-3 py-2 outline-none text-sm" style={{ backgroundColor: 'var(--bg-main)', borderColor: 'var(--border)', color: 'var(--text-main)' }} placeholder="https://..." required />
                                    <input type="text" value={newAppIcon} onChange={(e) => setNewAppIcon(e.target.value)} className="w-full border rounded-lg px-3 py-2 outline-none text-xs" style={{ backgroundColor: 'var(--bg-main)', borderColor: 'var(--border)', color: 'var(--text-main)' }} placeholder="URL ไอคอน" />
                                    <button type="submit" className="w-full font-bold py-2 rounded-xl shadow-lg mt-2" style={{ backgroundColor: 'var(--accent)', color: '#fff' }}>บันทึก</button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<WebAppLauncher />);
    </script>
</body>
</html>
